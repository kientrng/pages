<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ch·ªën H·ªçc T·∫≠p ‚Äî KienDev_</title>
<link rel="icon" href="avatar.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#05060b;            /* slightly deeper */
  --panel:#071026;
  --card:#0d1320;          /* card background */
  --muted:#99a6c8;
  --accent1:#7C3AED;
  --accent2:#06B6D4;
  --accent-boost: linear-gradient(90deg,var(--accent1),var(--accent2));
  --soft-glow: rgba(124,58,237,0.12);
  --glass: rgba(255,255,255,0.03);
  --pink1:#ffb86b;
  --pink2:#ff6bcb;
}
*{box-sizing:border-box}
html,body{height:100%;}
body{
  margin:0;
  background:linear-gradient(180deg,#040410,var(--bg));
  color:#e7eefc;
  font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
.wrap{max-width:1200px;margin:28px auto;padding:20px}

/* ===== Header ===== */
.header{
  display:flex;align-items:center;gap:18px;padding:22px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.01),transparent);border:1px solid rgba(255,255,255,0.03);box-shadow:0 6px 30px rgba(2,6,23,0.6) inset;
}
.logo{
  width:76px;height:76px;border-radius:18px;background:linear-gradient(180deg,#fff,#eee);display:flex;align-items:center;justify-content:center;padding:6px;flex:0 0 76px
}
.title h1{margin:0;font-size:20px;letter-spacing:1px;font-weight:700}
.title p{margin:6px 0 0;color:var(--muted);font-size:13px}
.search-wrap{margin-left:auto;display:flex;align-items:center}
.search{width:360px;padding:12px 16px;border-radius:12px;background:var(--glass);border:1px solid rgba(255,255,255,0.04);color:var(--muted);outline:none}
.search:focus{box-shadow:0 6px 30px rgba(6,21,55,0.6);border-color:rgba(124,58,237,.6);}

/* ===== Filters ===== */
.filters{margin-top:18px;display:flex;gap:10px;align-items:center}
.pill{
  display:inline-flex;align-items:center;gap:10px;padding:8px 14px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-weight:600;color:var(--muted);cursor:pointer;transition:transform .12s,box-shadow .12s
}
.pill:hover{transform:translateY(-3px)}
.pill.active{background:var(--accent-boost);color:white;box-shadow:0 8px 30px rgba(124,58,237,0.18)}
.pill .icon{
  width:30px;height:30px;border-radius:8px;display:inline-grid;place-items:center;font-weight:700;color:white;font-size:14px;box-shadow:0 6px 18px rgba(0,0,0,0.4)
}
.pill .icon.all{background:linear-gradient(90deg,var(--accent1),#4cc9f0)}
.pill .icon.recent{background:linear-gradient(90deg,#2dd4bf,#7c3aed)}
.pill .icon.g10{background:linear-gradient(90deg,var(--grade10-start, #FF9966),var(--grade10-end, #FF5E7E))}
.pill .icon.g11{background:linear-gradient(90deg,var(--grade11-start, #7C3AED),var(--grade11-end, #06B6D4))}
.pill .icon.g12{background:linear-gradient(90deg,var(--grade12-start, #06B6D4),var(--grade12-end, #34D1FF))}

/* section titles */
.section-title{margin:24px 0 12px;color:var(--muted);font-weight:600}

/* ===== Recent (top small) ===== */
.recent-row{display:flex;gap:16px;overflow-x:auto;padding-bottom:12px}
.recent-row .card{min-width:300px}
.recent-row::-webkit-scrollbar{height:8px}
.recent-row::-webkit-scrollbar-thumb{background:linear-gradient(90deg,var(--accent1),var(--accent2));border-radius:12px}

/* ===== Grid ===== */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;margin-top:8px}

/* ===== Card ===== */
.card{
  padding:18px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.015),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);box-shadow:0 10px 30px rgba(2,6,23,0.6);
}
.card:hover{transform:translateY(-8px);box-shadow:0 20px 50px rgba(2,6,23,0.7)}
.top-badge{position:absolute;top:18px;left:18px;padding:6px 10px;font-size:12px;font-weight:800;border-radius:999px;background:linear-gradient(90deg,var(--pink1),var(--pink2));color:#071023}
.card-top{display:flex;gap:14px;align-items:center}
.file-icon{width:62px;height:62px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:26px;color:#071023}
.file-icon.grade-10{background:linear-gradient(90deg,#FF9966,#FF5E7E);color:white}
.file-icon.grade-11{background:linear-gradient(90deg,#8b5cf6,#06b6d4);color:white}
.file-icon.grade-12{background:linear-gradient(90deg,#06b6d4,#34d1ff);color:white}
.file-icon.other{background:linear-gradient(90deg,#6b7280,#111827);color:white}
.name{font-weight:700;font-size:16px}
.sub{font-size:13px;color:var(--muted);margin-top:6px}

.actions{margin-top:14px;display:flex;gap:12px}
.btn-view{flex:1;padding:12px;border-radius:12px;border:0;font-weight:700;cursor:pointer;background:linear-gradient(90deg,#4cc9f0,#7c3aed);color:white;box-shadow:0 8px 20px rgba(124,58,237,0.12)}
.btn-view:hover{transform:translateY(-2px)}
.btn-dl{flex:1;padding:12px;border-radius:12px;font-weight:700;text-decoration:none;background:linear-gradient(90deg,#ffb86b,#ff6bcb);color:#071023;display:flex;align-items:center;justify-content:center}

/* utility */
.row{display:flex;gap:16px;align-items:center}

@media(max-width:900px){
  .search{width:220px}
  .logo{width:64px;height:64px}
  .file-icon{width:48px;height:48px}
}
</style>
</head>
<body>
<div class="wrap">
  <header class="header">
    <div class="logo"><img src="avatar.png" alt="logo" style="width:100%;height:100%;object-fit:cover;border-radius:10px"></div>
    <div class="title">
      <h1>CH·ªêN H·ªåC T·∫¨P</h1>
      <p>Code by KienDev ‚Äî Xem & T·∫£i t√†i li·ªáu</p>
    </div>
    <div class="search-wrap">
      <input id="q" class="search" placeholder="T√¨m m√£ & t√™n ƒë·ªÅ...">
    </div>
  </header>

  <div class="row filters" style="margin-top:18px">
    <div class="pill active" onclick="setFilter('all',this)"><span class="icon all">üè†</span> T·∫•t c·∫£</div>
    <div class="pill" onclick="setFilter('recent',this)"><span class="icon recent">üïò</span> G·∫ßn ƒë√¢y</div>
    <div class="pill" onclick="setFilter('10',this)"><span class="icon g10">10</span> L·ªõp 10</div>
    <div class="pill" onclick="setFilter('11',this)"><span class="icon g11">11</span> L·ªõp 11</div>
    <div class="pill" onclick="setFilter('12',this)"><span class="icon g12">12</span> L·ªõp 12</div>
  </div>

  <div class="section" id="recentSection">
    <div class="section-title">File g·∫ßn ƒë√¢y</div>
    <div id="recent" class="recent-row"></div>
  </div>

  <div class="section">
    <div class="section-title" id="mainTitle">T·∫•t c·∫£</div>
    <div id="grid" class="grid"></div>
  </div>
</div>

<script>
const owner="kientrng", repo="pages", folder="files";
const api=`https://api.github.com/repos/${owner}/${repo}/contents/${folder}`;

const grid=document.getElementById("grid");
const recent=document.getElementById("recent");
const q=document.getElementById("q");
let all=[],current="all";

const clean = n => n.replace(/\.(docx?|pdf|png|jpe?g)$/i,"");
const icon = n => /\.pdf$/i.test(n)? 'üìï' : /\.doc/i.test(n)? 'üìò' : 'üóíÔ∏è';

function parse(f){
  const base = clean(f.name);
  const p = base.split('-');
  const grade = p[0] || '';
  const num = p[1] || '';
  const subject = p[2] || '';
  const desc = p.slice(3).join('-') || '(kh√¥ng m√¥ t·∫£)';
  return {...f, grade, num, subject, desc };
}

const sortDesc = (a,b)=>{
  const g = Number(b.grade) - Number(a.grade);
  if(g!==0) return g;
  const n = Number(b.num) - Number(a.num);
  if(n!==0) return n;
  return b.subject.localeCompare(a.subject,'vi',{sensitivity:'base'});
};

function fileIconClass(grade){
  if(grade==='10') return 'grade-10';
  if(grade==='11') return 'grade-11';
  if(grade==='12') return 'grade-12';
  return 'other';
}

function card(f){
  const topLine = `${f.grade}-${f.num}-${f.subject}`.replace(/^-|-$|--/g,'');
  const cls = fileIconClass(f.grade);
  return `
<div class="card" style="position:relative">
  <div class="top-badge">${f.grade}</div>
  <div class="card-top">
    <div class="file-icon ${cls}">${icon(f.name)}</div>
    <div>
      <div class="name">${topLine}</div>
      <div class="sub desc-ellipsis">${escapeHtml(f.desc)}</div>
    </div>
  </div>
  <div class="actions">
    <button class="btn-view" onclick="openView('${f.download_url}','${f.name}')">üëÅ Xem</button>
    <a class="btn-dl" href="${f.download_url}" download>‚¨á T·∫£i</a>
  </div>
</div>`;
}

function render(list){grid.innerHTML=list.map(card).join('');}

function renderRecent(){
  const pick = g => all.filter(f=>f.grade==g).sort(sortDesc).slice(0,2);
  const recentList = [...pick('12'), ...pick('11'), ...pick('10')];
  recent.innerHTML = `<div class="recent-row">${recentList.map(card).join('')}</div>`;
}

function setFilter(t,b){
  document.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));
  if(b) b.classList.add('active');
  current=t;
  document.getElementById('mainTitle').innerText = b?b.innerText:'T·∫•t c·∫£';
  document.getElementById('recentSection').style.display = (t==='recent') ? 'none' : 'block';
  apply();
}

function apply(){
  let list=[...all];
  if(current==='all'){
    render(list.sort(sortDesc));
    return;
  }
  if(current==='recent'){
    const grades = ['12','11','10'];
    grid.innerHTML = grades.map(g=>{
      const items = list.filter(f=>f.grade==g).sort(sortDesc);
      if(!items.length) return '';
      return `
        <div class="section">
          <h3 style="margin:0 0 8px;color:var(--muted)">L·ªõp ${g}</h3>
          <div class="recent-row">
            ${items.map(card).join('')}
          </div>
        </div>
      `;
    }).join('');
    return;
  }
  if(['10','11','12'].includes(current)){
    render(list.filter(f=>f.grade==current).sort(sortDesc));
    return;
  }
}

q.oninput = apply;

function openView(u,n){ location.href = `view.html?file=${encodeURIComponent(u)}&name=${encodeURIComponent(n)}` }
function escapeHtml(s){ return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

fetch(api).then(r=>r.json()).then(d=>{
  all = d.filter(x=>x.type==='file').map(parse);
  renderRecent();
  apply();
});
</script>
</body>
</html>
