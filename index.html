<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ch·ªën H·ªçc T·∫≠p ‚Äî KienDev_</title>
<link rel="icon" href="avatar.png">
<!-- Font: Outfit (clean, modern, very stylish) -->
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#030516;
  --card:#081225;
  --muted:#95a6c7;
  --accent1:#7C3AED;
  --accent2:#06B6D4;
  --pink1:#ffb86b;
  --pink2:#ff6bcb;
  --grade10-start: #FF9966; /* orange */
  --grade10-end: #FF5E7E;
  --grade11-start: #7C3AED; /* purple */
  --grade11-end: #06B6D4;
  --grade12-start: #06B6D4; /* teal */
  --grade12-end: #34D1FF;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:#eaf2ff;font-family:'Outfit',system-ui,-apple-system,'Segoe UI',Roboto,'Helvetica Neue',Arial;}
.wrap{max-width:1200px;margin:auto;padding:20px}

/* Header */
.top{display:flex;gap:16px;align-items:center;padding:16px;border-radius:12px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03)}
.avatar{width:64px;height:64px;border-radius:12px}
.title h1{margin:0;font-size:20px;font-weight:700}
.title p{margin:4px 0 0;color:var(--muted);font-size:13px}
.controls{margin-left:auto}
.search{padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.06);background:rgba(255,255,255,.02);color:var(--muted)}

/* filters */
.filters{margin-top:18px;display:flex;gap:8px;flex-wrap:wrap}
.pill{display:inline-flex;align-items:center;gap:10px;padding:8px 14px;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-weight:600;color:var(--muted);cursor:pointer}
.pill.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white}
.pill .btn-icon{width:30px;height:30px;border-radius:8px;display:inline-grid;place-items:center;color:white;font-weight:700}
.pill .btn-icon.all{background:linear-gradient(90deg,var(--accent1),#4cc9f0)}
.pill .btn-icon.recent{background:linear-gradient(90deg,#2dd4bf,#7c3aed)}
.pill .btn-icon.g10{background:linear-gradient(90deg,var(--grade10-start),var(--grade10-end))}
.pill .btn-icon.g11{background:linear-gradient(90deg,var(--grade11-start),var(--grade11-end))}
.pill .btn-icon.g12{background:linear-gradient(90deg,var(--grade12-start),var(--grade12-end))}

.section-title{margin:18px 0 8px;color:var(--muted);font-weight:600}

/* recent */
.recent-row{display:flex;gap:16px;overflow-x:auto;padding-bottom:12px}
.recent-row::-webkit-scrollbar{height:8px}
.recent-row::-webkit-scrollbar-thumb{background:linear-gradient(90deg,var(--accent1),var(--accent2));border-radius:10px}

/* grid/cards */
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
.card{padding:16px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.03);position:relative}
.card-top{display:flex;gap:12px;align-items:center}
.top-badge{position:absolute;top:12px;left:12px;padding:4px 8px;border-radius:999px;background:linear-gradient(90deg,var(--pink1),var(--pink2));color:#071023;font-weight:800}
.file-icon{width:52px;height:52px;border-radius:12px;display:flex;align-items:center;justify-content:center}
.file-icon.grade-10{background:linear-gradient(90deg,var(--grade10-start),var(--grade10-end))}
.file-icon.grade-11{background:linear-gradient(90deg,var(--grade11-start),var(--grade11-end))}
.file-icon.grade-12{background:linear-gradient(90deg,var(--grade12-start),var(--grade12-end))}
.file-icon.other{background:linear-gradient(90deg,#6b7280,#111827)}

/* New: SVG styling - only affect the book (rect) color */
.file-icon svg { width:28px;height:36px;display:block }
.file-icon svg .book-shape { fill:#fff; }
.file-icon.grade-10 svg .book-shape { fill:#FF9966; }
.file-icon.grade-11 svg .book-shape { fill:#8b5cf6; }
.file-icon.grade-12 svg .book-shape { fill:#06b6d4; }
.file-icon.other svg .book-shape { fill:#d1d5db; }

.name{font-weight:700}
.sub{margin-top:6px;color:var(--muted);font-size:13px}
.actions{margin-top:12px;display:flex;gap:10px}
.btn-view{flex:1;padding:10px;border-radius:10px;border:0;background:linear-gradient(90deg,#0ea5e9,#7c3aed);color:white;font-weight:700}
.btn-dl{flex:1;padding:10px;border-radius:10px;background:linear-gradient(90deg,var(--pink1),var(--pink2));color:#071023;font-weight:700;text-decoration:none;display:flex;align-items:center;justify-content:center}

/* ellipsis */
.desc-ellipsis{display:block;max-height:2.6em;overflow:hidden;text-overflow:ellipsis}

@media(max-width:900px){.file-icon{width:46px;height:46px}}
</style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <img src="avatar.png" class="avatar">
    <div class="title">
      <h1>CH·ªêN H·ªåC T·∫¨P</h1>
      <p>Code by KienDev ‚Äî Xem & T·∫£i t√†i li·ªáu</p>
    </div>
    <div class="controls"><input id="q" class="search" placeholder="T√¨m m√£ & t√™n ƒë·ªÅ..."></div>
  </div>

  <div class="filters">
    <div class="pill active" onclick="setFilter('all',this)"><span class="btn-icon all">üè†</span> T·∫•t c·∫£</div>
    <div class="pill" onclick="setFilter('recent',this)"><span class="btn-icon recent">üïò</span> G·∫ßn ƒë√¢y</div>
    <div class="pill" onclick="setFilter('10',this)"><span class="btn-icon g10">10</span> L·ªõp 10</div>
    <div class="pill" onclick="setFilter('11',this)"><span class="btn-icon g11">11</span> L·ªõp 11</div>
    <div class="pill" onclick="setFilter('12',this)"><span class="btn-icon g12">12</span> L·ªõp 12</div>
  </div>

  <div class="section" id="recentSection">
    <div class="section-title">File g·∫ßn ƒë√¢y</div>
    <div id="recent" class="recent-row"></div>
  </div>

  <div class="section">
    <div class="section-title" id="mainTitle">T·∫•t c·∫£</div>
    <div id="grid" class="grid"></div>
  </div>
</div>

<script>
const owner="kientrng", repo="pages", folder="files";
const api=`https://api.github.com/repos/${owner}/${repo}/contents/${folder}`;

const grid=document.getElementById("grid");
const recent=document.getElementById("recent");
const q=document.getElementById("q");
let all=[],current="all";

const clean = n => n.replace(/\.(docx?|pdf|png|jpe?g)$/i,"");
function extOf(n){const m=n.match(/\.([a-z0-9]+)$/i);return m?m[1].toLowerCase():''}

// New svgBook (simple rounded-rect 'phone/book' shape) and svgNote
const svgBook = `
<svg viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
  <!-- outer phone/book silhouette -->
  <rect x="4" y="2" width="16" height="28" rx="3" ry="3" fill="none" stroke="rgba(0,0,0,0.08)"/>
  <!-- inner page/screen that will be colored via .book-shape -->
  <rect class="book-shape" x="7" y="6" width="10" height="20" rx="1.5" />
</svg>`;
const svgNote = `
<svg viewBox="0 0 24 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
  <path d="M4 3h11l5 5v19a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z" fill="#fff" opacity="0.06"/>
  <path d="M8 10h8v2H8zM8 14h8v2H8z" fill="#fff" opacity="0.12"/>
</svg>`;

function parse(f){
  const base = clean(f.name);
  const p = base.split('-');
  const grade = p[0] || '';
  const num = p[1] || '';
  const subject = p[2] || '';
  const desc = p.slice(3).join('-') || '(kh√¥ng m√¥ t·∫£)';
  return {...f, grade, num, subject, desc };
}

const sortDesc = (a,b)=>{const g=Number(b.grade)-Number(a.grade);if(g!==0) return g;const n=Number(b.num)-Number(a.num);if(n!==0) return n;return b.subject.localeCompare(a.subject,'vi',{sensitivity:'base'});};
function fileIconClass(grade){if(grade==='10') return 'grade-10';if(grade==='11') return 'grade-11';if(grade==='12') return 'grade-12';return 'other';}

function card(f){
  const topLine = `${f.grade}-${f.num}-${f.subject}`.replace(/^-|-$|--/g,'');
  const cls = fileIconClass(f.grade);
  const ext = extOf(f.name);
  const iconSvg = (ext==='pdf' || /doc/.test(ext)) ? svgBook : svgNote;
  return `
<div class="card" style="position:relative">
  <div class="top-badge">${f.grade}</div>
  <div class="card-top">
    <div class="file-icon ${cls}">${iconSvg}</div>
    <div>
      <div class="name">${topLine}</div>
      <div class="sub desc-ellipsis">${escapeHtml(f.desc)}</div>
    </div>
  </div>
  <div class="actions">
    <button class="btn-view" onclick="openView('${f.download_url}','${f.name}')">üëÅ Xem</button>
    <a class="btn-dl" href="${f.download_url}" download>‚¨á T·∫£i</a>
  </div>
</div>`;
}

function render(list){grid.innerHTML=list.map(card).join('');}
function renderRecent(){const pick=g=>all.filter(f=>f.grade==g).sort(sortDesc).slice(0,2);const recentList=[...pick('12'),...pick('11'),...pick('10')];recent.innerHTML=`<div class="recent-row">${recentList.map(card).join('')}</div>`;}

function setFilter(t,b){document.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));if(b) b.classList.add('active');current=t;document.getElementById('mainTitle').innerText=b?b.innerText:'T·∫•t c·∫£';document.getElementById('recentSection').style.display=(t==='recent')?'none':'block';apply();}

function apply(){let list=[...all];if(current==='all'){render(list.sort(sortDesc));return;}if(current==='recent'){const grades=['12','11','10'];grid.innerHTML=grades.map(g=>{const items=list.filter(f=>f.grade==g).sort(sortDesc);if(!items.length) return '';return `<div class="section"><h3 style="margin:0 0 8px;color:var(--muted)">L·ªõp ${g}</h3><div class="recent-row">${items.map(card).join('')}</div></div>`;}).join('');return;}if(['10','11','12'].includes(current)){render(list.filter(f=>f.grade==current).sort(sortDesc));return;}}

q.oninput=apply;function openView(u,n){location.href=`view.html?file=${encodeURIComponent(u)}&name=${encodeURIComponent(n)}`}
function escapeHtml(s){return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
fetch(api).then(r=>r.json()).then(d=>{all=d.filter(x=>x.type==='file').map(parse);renderRecent();apply();});
</script>
</body>
</html>
